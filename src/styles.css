/* Load Tailwind v4 first */
@import "tailwindcss";

/* Make Tailwind utilities available for @apply in this file */
@reference "tailwindcss";

/* ---------- Theme tokens ---------- */
/* We treat :root as the DARK palette.
   Light mode overrides when <html> DOES NOT have .dark */
:root {
  --bg: #0f1720;         /* slightly richer dark */
  --card: #101922;
  --text: #f8fafc;
  --muted: #9db0c2;
  --primary: #1173d4;
}
:root:not(.dark) {
  --bg: #f6f7f8;
  --card: #ffffff;
  --text: #1f2937;
  --muted: #64748b;
  --primary: #1173d4;
}

html, body, #root { height: 100%; }
html { transition: background-color .25s ease, color .25s ease; }
body {
  background: var(--bg);
  color: var(--text);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue",
    Arial, "Noto Sans", "Liberation Sans", "Apple Color Emoji", "Segoe UI Emoji";
}

label { line-height: 1; }

/* ---------- Helpers ---------- */
.input {
  @apply w-full h-14 rounded-lg border bg-transparent px-4 text-base outline-none transition
         focus:ring-2 focus:ring-[color:var(--primary)]/40 focus:border-[color:var(--primary)];
  border-color: color-mix(in oklab, #ffffff 0%, #3b4754 35%);
}
.input::placeholder { color: var(--muted); }

.btn {
  @apply inline-flex items-center justify-center rounded-lg px-5 h-12 font-bold
         cursor-pointer select-none transition;
  transition: transform .18s ease, box-shadow .18s ease, background-color .18s ease, color .18s ease;
}
.btn:active { transform: translateY(1px); }
.btn-primary { background: var(--primary); color: white; }
.btn-primary:hover { filter: brightness(1.05); }
.btn-muted { @apply bg-slate-200/60 dark:bg-slate-700/60 text-slate-900 dark:text-white; }
.btn-muted:hover { @apply bg-slate-200 dark:bg-slate-700; }

.card { @apply rounded-xl; background: var(--card); }
.shadow-soft { box-shadow: 0 6px 30px rgba(0,0,0,.18), 0 1px 2px rgba(0,0,0,.24); }

/* Dropzone states */
.dropzone {
  @apply border-2 border-dashed rounded-xl p-12 grid place-items-center text-center transition
         bg-transparent;
  border-color: color-mix(in oklab, #fff 0%, #3b4754 40%);
  cursor: pointer;
  transition: background-color .2s ease, border-color .2s ease, outline-color .2s ease;
}
.dropzone:hover { @apply bg-white/5; }
.dropzone--active {
  border-color: var(--primary);
  outline: 3px solid color-mix(in oklab, var(--primary) 40%, transparent);
  outline-offset: 2px;
  background: color-mix(in oklab, var(--primary) 10%, transparent);
  @apply cursor-copy;
}

/* Sidebar buttons */
.nav-btn {
  @apply flex items-center gap-3 w-full px-3 py-2 rounded-lg text-left cursor-pointer;
  transition: background-color .24s ease, color .24s ease, transform .18s ease;
}
.nav-btn--active {
  background: color-mix(in oklab, var(--primary) 22%, transparent);
  color: #3B82F6;
  transform: translateX(0px) scale(1.01);
}
.nav-btn--idle { @apply text-[color:var(--muted)] hover:bg-white/5; }

/* Floating nav indicator (animated) */
.nav-indicator {
  position: absolute;
  left: -6px;
  width: 4px;
  background: var(--primary);
  border-radius: 999px;
  transition: transform .28s cubic-bezier(.22,.65,.32,1), height .28s ease;
  will-change: transform, height;
}

/* Material Symbols defaults */
.material-symbols-outlined {
  font-variation-settings:
    'FILL' 0,
    'Wght' 400,
    'GRAD' 0,
    'opsz' 24;
  transition: color .24s ease, transform .18s ease, opacity .2s ease;
}

/* ---------- Lightweight table styling for CSV preview ---------- */
.table { border-collapse: separate; border-spacing: 0; }
.table-th {
  @apply sticky top-0 z-10 text-left text-xs font-bold uppercase tracking-wide;
  background: color-mix(in oklab, var(--card) 92%, #000 8%);
  padding: 10px 12px;
  border-bottom: 1px solid color-mix(in oklab, #ffffff 0%, #3b4754 35%);
}
.table-tr:nth-child(even) td { background: color-mix(in oklab, var(--card) 96%, #000 4%); }
.table-td {
  padding: 10px 12px;
  border-bottom: 1px solid color-mix(in oklab, #ffffff 0%, #3b4754 30%);
  vertical-align: top;
}

/* ---------- Step slide-in animations ---------- */
.step-anim-wrapper { will-change: transform, opacity; }
@keyframes slideInRight {
  from { opacity: 0; transform: translateX(22px); }
  to   { opacity: 1; transform: translateX(0); }
}
@keyframes slideInLeft {
  from { opacity: 0; transform: translateX(-22px); }
  to   { opacity: 1; transform: translateX(0); }
}
.slide-in-right { animation: slideInRight .28s ease both; }
.slide-in-left  { animation: slideInLeft  .28s ease both; }

/* ---- Success pop-in animation ---- */
@keyframes successPop {
  0%   { transform: scale(0.6) rotate(-8deg); opacity: 0; }
  60%  { transform: scale(1.12) rotate(0deg); opacity: 1; }
  100% { transform: scale(1); }
}
.success-icon {
  animation: successPop 1s cubic-bezier(.22,.65,.32,1) both;
}

/* (Optional) gentle text reveal used below */
@keyframes fadeUp {
  from { opacity: 0; transform: translateY(6px); }
  to   { opacity: 1; transform: translateY(0); }
}
.fade-up { animation: fadeUp .28s ease both; }

/* ---------- Sun/Moon theme toggle ---------- */
.theme-toggle {
  position: relative;
  display: inline-flex;
  align-items: center;
  cursor: pointer;
  /* prevent accidental text selection on rapid toggles */
  user-select: none;
}

.theme-toggle input {
  position: absolute;
  inset: 0;
  opacity: 0;
  pointer-events: none;
}

.theme-toggle .toggle-track {
  position: relative;
  width: 52px;
  height: 28px;
  border-radius: 999px;
  background: color-mix(in oklab, var(--card) 75%, #000 25%);
  border: 1px solid color-mix(in oklab, #ffffff 0%, #3b4754 35%);
  display: inline-flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 6px;
  transition: background-color .25s ease, border-color .25s ease;
}

.theme-toggle .icon {
  font-size: 16px;
  line-height: 1;
  transition: opacity .2s ease, transform .2s ease, color .2s ease;
  color: var(--muted);
  opacity: .75;
}

.theme-toggle .icon.sun { order: 0; }
.theme-toggle .icon.moon { order: 2; }

.theme-toggle .thumb {
  position: absolute;
  left: 1px;
  top: 1px;
  width: 24px;
  height: 24px;
  border-radius: 999px;
  background: #fff;
  box-shadow: 0 2px 8px rgba(0,0,0,.25);
  transition: transform .25s cubic-bezier(.22,.65,.32,1), background-color .25s ease;
}

/* Light mode (unchecked) emphasis: sun brighter */
.theme-toggle input:not(:checked) + .toggle-track .icon.sun {
  opacity: 1;
  transform: scale(1.05);
  color: #f59e0b; /* warm sun */
}
.theme-toggle input:not(:checked) + .toggle-track .icon.moon {
  opacity: .5;
}

/* Dark mode (checked) emphasis: moon brighter */
.theme-toggle input:checked + .toggle-track {
  background: color-mix(in oklab, var(--primary) 18%, var(--card));
  border-color: color-mix(in oklab, var(--primary) 40%, #3b4754);
}
.theme-toggle input:checked + .toggle-track .thumb {
  z-index: 1;
  transform: translateX(24px);
  background: #e5f0ff;
}
.theme-toggle input:checked + .toggle-track .icon.moon {
  opacity: 1;
  transform: scale(1.05);
  color: #60a5fa; /* cool moon */
}
.theme-toggle input:checked + .toggle-track .icon.sun {
  opacity: .5;
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  .theme-toggle .thumb,
  .theme-toggle .icon,
  .theme-toggle .toggle-track {
    transition: none !important;
  }
}
